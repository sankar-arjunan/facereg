{"ast":null,"code":"var _jsxFileName = \"/Users/gowrisankara/Desktop/DL-PRO/FaceReg/client2/src/components/CameraCapture.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from 'react';\nimport Webcam from 'react-webcam';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CameraCapture = ({\n  type,\n  setType\n}) => {\n  _s();\n  async function getDynamicUrl() {\n    try {\n      const response = await fetch('https://sanhector.pythonanywhere.com/');\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      const data = await response.json();\n      return data.url;\n    } catch (error) {\n      console.error('Error fetching dynamic URL:', error);\n      return null;\n    }\n  }\n  const webcamRef = useRef(null);\n  const [image, setImage] = useState(null);\n  const [name, setName] = useState('');\n  const [authResult, setAuthResult] = useState(null);\n  const [detectionProbability, setDetectionProbability] = useState(0.0);\n  const capture = React.useCallback(() => {\n    const imageSrc = webcamRef.current.getScreenshot();\n    setImage(imageSrc);\n    setDetectionProbability(0);\n  }, [webcamRef]);\n  const handleRegister = async () => {\n    if (!image || !name) {\n      alert('Please capture an image and provide a name.');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', dataURLtoFile(image, 'captured-image.jpg'));\n    formData.append('name', name);\n    try {\n      const url = await getDynamicUrl();\n      await axios.post(url + '/register_face', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      alert('Face registered successfully!');\n      setType(\"\");\n    } catch (error) {\n      console.error('Error uploading image:', error);\n      alert('Error registering face.');\n    }\n  };\n  const handleAuthenticate = async () => {\n    if (!image) {\n      alert('Please capture an image.');\n      return;\n    }\n    const formData = new FormData();\n    formData.append('file', dataURLtoFile(image, 'captured-image.jpg'));\n    try {\n      const url = await getDynamicUrl();\n      const response = await axios.post(url + '/authenticate_face', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      if (response.status == 200) {\n        setAuthResult(response.data);\n      } else {\n        var _response$data;\n        const errorMessage = ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.error) || 'An error occurred while authenticating the face.';\n        alert(errorMessage);\n      }\n    } catch (error) {\n      if (error.response) {\n        var _error$response$data;\n        const errorMessage = ((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'An error occurred while authenticating the face.';\n        if (errorMessage == \"Attendace already marked\") {\n          setType(\"\");\n        }\n        alert(errorMessage);\n      } else if (error.request) {\n        alert('No response received from the server.');\n      } else {\n        alert('Error in the request setup.');\n      }\n    }\n  };\n  const checkFaceDetection = async () => {\n    const imageSrc = webcamRef.current.getScreenshot();\n    if (imageSrc) {\n      const formData = new FormData();\n      formData.append('file', dataURLtoFile(imageSrc, 'live-image.jpg'));\n      try {\n        const url = await getDynamicUrl();\n        const response = await axios.post(url + '/check_face_detection', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        setDetectionProbability(response.data.probability);\n      } catch (error) {\n        setDetectionProbability(0);\n      }\n    }\n  };\n  useEffect(() => {\n    let interval;\n    if ((type === 'Auth' || type === \"Register\") && !image) {\n      interval = setInterval(checkFaceDetection, 1000);\n    } else {\n      clearInterval(interval);\n    }\n    return () => clearInterval(interval);\n  }, [type, image]);\n  const dataURLtoFile = (dataURL, filename) => {\n    const [header, data] = dataURL.split(',');\n    const mime = header.match(/:(.*?);/)[1];\n    const binary = atob(data);\n    const array = [];\n    for (let i = 0; i < binary.length; i++) {\n      array.push(binary.charCodeAt(i));\n    }\n    return new File([new Uint8Array(array)], filename, {\n      type: mime\n    });\n  };\n  const handleDelete = async id => {\n    try {\n      const response = await fetch(url + `/delete?id=${id}`, {\n        method: 'DELETE'\n      });\n      if (response.ok) {\n        const result = await response.json();\n        alert(\"Attendance response removed\");\n      } else {\n        const error = await response.json();\n        alert(error.error);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('An error occurred while deleting the record.');\n    } finally {\n      setType(\"\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!image && /*#__PURE__*/_jsxDEV(Webcam, {\n      audio: false,\n      ref: webcamRef,\n      screenshotFormat: \"image/jpeg\",\n      width: 360,\n      height: 360,\n      style: {\n        padding: '24px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 18\n    }, this), !image && !authResult && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"0 24px 24px 24px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: \"center\"\n        },\n        children: \"Face Detection Quality:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          textAlign: \"center\",\n          color: detectionProbability === 0 ? \"red\" : detectionProbability * 100 > 95 ? \"green\" : \"orange\"\n        },\n        children: detectionProbability === 0 ? \"No face detected\" : detectionProbability * 100 > 95 ? \"Excellent\" : \"Better image needed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 33\n    }, this), !image && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: detectionProbability * 100 > 95 ? capture : () => {},\n      style: {\n        border: \"1px solid transparent\",\n        color: \"white\",\n        background: detectionProbability * 100 > 95 ? \"green\" : \"grey\",\n        padding: \"16px 32px\",\n        width: \"100%\",\n        fontSize: \"24px\"\n      },\n      children: detectionProbability * 100 > 95 ? \"Capture\" : \"Make face visible\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 18\n    }, this), image && !authResult && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          textAlign: \"center\",\n          padding: \"24px 0 0 0\"\n        },\n        children: \"Captured image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: image,\n        alt: \"Captured\",\n        style: {\n          padding: '24px 0 '\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }, this), type === 'Auth' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: \"24px\",\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAuthenticate,\n          style: {\n            border: \"1px solid transparent\",\n            color: \"white\",\n            background: \"green\",\n            padding: \"16px 32px\",\n            width: \"80%\",\n            fontSize: \"24px\"\n          },\n          children: \"Authenticate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setImage(null);\n            setAuthResult(null);\n          },\n          style: {\n            border: \"1px solid green\",\n            color: \"green\",\n            background: \"white\",\n            padding: \"16px 32px\",\n            width: \"80%\",\n            fontSize: \"24px\"\n          },\n          children: \"Retake\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }, this), type === 'Register' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: \"12px\",\n          minWidth: \"96px\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter rollno\",\n          value: name,\n          onChange: e => setName(e.target.value),\n          style: {\n            fontSize: \"24px\",\n            background: \"white\",\n            border: \"1px solid grey\",\n            padding: \"12px 24px\",\n            borderRadius: \"4px\",\n            width: \"80%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleRegister,\n          style: {\n            border: \"1px solid green\",\n            color: \"white\",\n            background: \"green\",\n            padding: \"16px 32px\",\n            width: \"80%\",\n            fontSize: \"24px\",\n            marginTop: \"24px\"\n          },\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true), authResult && type === 'Auth' && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          gap: \"96px\",\n          padding: \"24px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            flexDirection: \"column\",\n            alignItems: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              color: \"black\",\n              fontWeight: \"500\"\n            },\n            children: \"Attendace marked for \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            style: {\n              color: \"green\",\n              marginTop: \"0\"\n            },\n            children: authResult.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(authResult.id),\n          style: {\n            border: \"1px solid red\",\n            color: \"red\",\n            background: \"white\",\n            padding: \"16px 32px\",\n            width: \"80%\",\n            fontSize: \"24px\"\n          },\n          children: [\"Not \", authResult.name, \"?\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setType(\"\"),\n          style: {\n            border: \"1px solid green\",\n            color: \"green\",\n            background: \"white\",\n            padding: \"16px 32px\",\n            width: \"80%\",\n            fontSize: \"24px\"\n          },\n          children: \"Go to Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), type === 'Register' && !image && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setType(\"\"),\n      style: {\n        marginTop: \"24px\",\n        border: \"1px solid grey\",\n        color: \"grey\",\n        background: \"white\",\n        padding: \"16px 32px\",\n        width: \"100%\",\n        fontSize: \"24px\"\n      },\n      children: \"Go to Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 5\n  }, this);\n};\n_s(CameraCapture, \"VFveHbMxk/7DzjNCAAG+skiC9Eo=\");\n_c = CameraCapture;\nexport default CameraCapture;\nvar _c;\n$RefreshReg$(_c, \"CameraCapture\");","map":{"version":3,"names":["React","useRef","useState","useEffect","Webcam","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","CameraCapture","type","setType","_s","getDynamicUrl","response","fetch","ok","Error","data","json","url","error","console","webcamRef","image","setImage","name","setName","authResult","setAuthResult","detectionProbability","setDetectionProbability","capture","useCallback","imageSrc","current","getScreenshot","handleRegister","alert","formData","FormData","append","dataURLtoFile","post","headers","handleAuthenticate","status","_response$data","errorMessage","_error$response$data","request","checkFaceDetection","probability","interval","setInterval","clearInterval","dataURL","filename","header","split","mime","match","binary","atob","array","i","length","push","charCodeAt","File","Uint8Array","handleDelete","id","method","result","children","audio","ref","screenshotFormat","width","height","style","padding","fileName","_jsxFileName","lineNumber","columnNumber","textAlign","color","onClick","border","background","fontSize","src","alt","display","flexDirection","gap","alignItems","minWidth","placeholder","value","onChange","e","target","borderRadius","marginTop","fontWeight","_c","$RefreshReg$"],"sources":["/Users/gowrisankara/Desktop/DL-PRO/FaceReg/client2/src/components/CameraCapture.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport Webcam from 'react-webcam';\nimport axios from 'axios';\n\nconst CameraCapture = ({ type, setType }) => {\n\nasync function getDynamicUrl() {\n  try {\n      const response = await fetch('https://sanhector.pythonanywhere.com/');\n      if (!response.ok) {\n          throw new Error('Network response was not ok');\n      }\n      const data = await response.json();\n      return data.url;  \n  } catch (error) {\n      console.error('Error fetching dynamic URL:', error);\n      return null;\n  }\n}\n\n  const webcamRef = useRef(null);\n  const [image, setImage] = useState(null);\n  const [name, setName] = useState('');\n  const [authResult, setAuthResult] = useState(null);\n  const [detectionProbability, setDetectionProbability] = useState(0.0);\n\n\n  const capture = React.useCallback(() => {\n    const imageSrc = webcamRef.current.getScreenshot();\n    setImage(imageSrc);\n    setDetectionProbability(0);\n  }, [webcamRef]);\n\n  const handleRegister = async () => {\n    if (!image || !name) {\n      alert('Please capture an image and provide a name.');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', dataURLtoFile(image, 'captured-image.jpg'));\n    formData.append('name', name);\n\n    try {\n      const url= await getDynamicUrl();\n      await axios.post(url+'/register_face', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      alert('Face registered successfully!');\n      setType(\"\");\n    } catch (error) {\n      console.error('Error uploading image:', error);\n      alert('Error registering face.');\n    }\n  };\n\n  const handleAuthenticate = async () => {\n    if (!image) {\n      alert('Please capture an image.');\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append('file', dataURLtoFile(image, 'captured-image.jpg'));\n\n    try {\n      const url= await getDynamicUrl();\n      const response = await axios.post(url + '/authenticate_face', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      \n      if (response.status == 200 ) {\n        setAuthResult(response.data);\n      } else {\n        const errorMessage = response.data?.error || 'An error occurred while authenticating the face.';\n        alert(errorMessage);\n      }\n    } catch (error) {\n      if (error.response) {\n        const errorMessage = error.response.data?.error || 'An error occurred while authenticating the face.';\n        if(errorMessage==\"Attendace already marked\"){ setType(\"\");}\n        alert(errorMessage);\n      } else if (error.request) {\n        alert('No response received from the server.');\n      } else {\n        alert('Error in the request setup.');\n      }\n    }\n    \n  };\n\n  const checkFaceDetection = async () => {\n    const imageSrc = webcamRef.current.getScreenshot();\n    if (imageSrc) {\n      const formData = new FormData();\n      formData.append('file', dataURLtoFile(imageSrc, 'live-image.jpg'));\n      \n      try {\n        const url= await getDynamicUrl();\n        const response = await axios.post(url+'/check_face_detection', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        setDetectionProbability(response.data.probability);\n      } catch (error) {\n        setDetectionProbability(0);\n      }\n    }\n  };\n\n  useEffect(() => {\n    let interval;\n    if ((type === 'Auth' || type===\"Register\")&& !image) {\n      interval = setInterval(checkFaceDetection, 1000);\n    } else {\n      clearInterval(interval);\n    }\n\n    return () => clearInterval(interval);\n  }, [type, image]);\n\n  const dataURLtoFile = (dataURL, filename) => {\n    const [header, data] = dataURL.split(',');\n    const mime = header.match(/:(.*?);/)[1];\n    const binary = atob(data);\n    const array = [];\n    for (let i = 0; i < binary.length; i++) {\n      array.push(binary.charCodeAt(i));\n    }\n    return new File([new Uint8Array(array)], filename, { type: mime });\n  };\n\n  const handleDelete = async (id) => {\n    try {\n      const response = await fetch(url+`/delete?id=${id}`, {\n        method: 'DELETE',\n      });\n\n      if (response.ok) {\n        const result = await response.json();\n        alert(\"Attendance response removed\");\n      } else {\n        const error = await response.json();\n        alert(error.error);\n      }\n    } catch (error) {\n      console.error('Error:', error);\n      alert('An error occurred while deleting the record.');\n    }\n    finally{\n      setType(\"\");\n    }\n  };\n\n\n  return (\n    <div>\n      {!image && <Webcam\n        audio={false}\n        ref={webcamRef}\n        screenshotFormat=\"image/jpeg\"\n        width={360} \n        height={360} \n        style={{ padding: '24px' }}\n      />}\n      {!image && !authResult && <div style={{padding:\"0 24px 24px 24px\"}}>\n                <h2 style={{textAlign:\"center\"}}>Face Detection Quality:</h2>\n                <h2 style={{textAlign:\"center\", color:detectionProbability === 0 ? \"red\" :detectionProbability*100 > 95 ? \"green\": \"orange\"}}>{detectionProbability === 0 ? \"No face detected\" :detectionProbability*100 > 95 ? \"Excellent\": \"Better image needed\"}</h2>\n                </div>}\n      {!image && <button onClick={detectionProbability*100 > 95 ? capture : ()=>{}} style={{border:\"1px solid transparent\", color:\"white\", background: detectionProbability*100 > 95 ? \"green\": \"grey\", padding:\"16px 32px\", width:\"100%\", fontSize:\"24px\"}}>{detectionProbability*100 > 95 ? \"Capture\" : \"Make face visible\"}</button>}\n\n      {image && !authResult &&  (\n        <> <h3 style={{textAlign:\"center\", padding:\"24px 0 0 0\"}}>Captured image</h3>\n          <img src={image} alt=\"Captured\" style={{ padding: '24px 0 ' }} />\n          {type === 'Auth' && (\n            <div style={{display:\"flex\", flexDirection:\"column\", gap:\"24px\", alignItems:\"center\"}}>\n              <button onClick={handleAuthenticate} style={{border:\"1px solid transparent\", color:\"white\", background:\"green\", padding:\"16px 32px\", width:\"80%\", fontSize:\"24px\"}}>Authenticate</button>\n              <button onClick={() =>{ setImage(null); setAuthResult(null)}}  style={{border:\"1px solid green\", color:\"green\", background:\"white\", padding:\"16px 32px\", width:\"80%\", fontSize:\"24px\"}}>Retake</button>\n            </div>\n          )}\n\n          {type === 'Register' && (\n            <div style={{padding:\"12px\",minWidth:\"96px\", display:\"flex\", flexDirection:\"column\", alignItems:\"center\"}}>\n              <input\n                type=\"text\"\n                placeholder=\"Enter rollno\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                style={{fontSize:\"24px\", background:\"white\",border:\"1px solid grey\", padding:\"12px 24px\", borderRadius:\"4px\", width:\"80%\"}}\n              />\n              <button onClick={handleRegister} style={{border:\"1px solid green\", color:\"white\", background:\"green\", padding:\"16px 32px\", width:\"80%\", fontSize:\"24px\", marginTop:\"24px\"}}>Register</button>\n            </div>\n          )}\n        </>\n      )}\n\n      {authResult && type === 'Auth' && (\n        <>\n          <div style={{display:\"flex\", flexDirection:\"column\", alignItems:\"center\",gap:\"96px\", padding:\"24px\"}}>\n            <div style={{display:\"flex\", flexDirection:\"column\", alignItems:\"center\"}}>\n              <h2 style={{color:\"black\", fontWeight:\"500\"}}>Attendace marked for </h2>\n              <h2 style={{color:\"green\", marginTop:\"0\"}}>{authResult.name}</h2>\n            </div>\n            <button onClick={() => handleDelete(authResult.id)} style={{border:\"1px solid red\", color:\"red\", background:\"white\", padding:\"16px 32px\", width:\"80%\", fontSize:\"24px\"}}>Not {authResult.name}?</button>\n          <button onClick={() => setType(\"\")} style={{border:\"1px solid green\", color:\"green\", background:\"white\", padding:\"16px 32px\", width:\"80%\", fontSize:\"24px\"}}>Go to Home</button>\n          </div>\n        </>\n      )}\n\n      {type === 'Register' && !image && (\n        <button onClick={() => setType(\"\")} style={{marginTop:\"24px\", border:\"1px solid grey\", color:\"grey\", background:\"white\", padding:\"16px 32px\", width:\"100%\", fontSize:\"24px\"}}>Go to Home</button>\n      )}\n    </div>\n  );\n};\n\nexport default CameraCapture;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}